{"remainingRequest":"/usr/src/app/meneki-web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/meneki-web2/src/views/EditMemberDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/meneki-web2/src/views/EditMemberDetail.vue","mtime":1620829437691},{"path":"/usr/src/app/meneki-web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOw0KaW1wb3J0IHsgbWRiQnRuLCBtZGJNb2RhbCwgbWRiTW9kYWxIZWFkZXIsIG1kYk1vZGFsVGl0bGUsIG1kYk1vZGFsQm9keSwgbWRiTW9kYWxGb290ZXIsbWRiQ29udGFpbmVyIH0gZnJvbSAnbWRidnVlJzsNCiAgZXhwb3J0IGRlZmF1bHR7DQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm57DQogICAgICAgICAgICBuYW1lOicnLA0KICAgICAgICAgICAgc3RhdHVzOicnLA0KICAgICAgICAgICAgZW1haWw6JycsDQogICAgICAgICAgICBhY2hpZXZlbWVudDonJywNCiAgICAgICAgICAgIHJlbWFya3M6JycsDQogICAgICAgICAgICB1cGxvYWRlZEltYWdlOicnLA0KICAgICAgICAgICAgaW5wdXRJbWc6IiIsDQogICAgICAgICAgICBmaWxlUGF0aDoiIiwNCiAgICAgICAgICAgIGVkaXRNZW1iZXJEZXRhaWxCdG46IumBqeeUqCIsDQogICAgICAgICAgICBlZGl0TWVtYmVyRGV0YWlsQnRuUHVzaDpmYWxzZSwNCiAgICAgICAgICAgIGZvcm1Nb2RhbDpmYWxzZSwNCiAgICAgICAgICAgIGZvcm1Nb2RhbE1lc3NhZ2U6IiIsDQoNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcG9uZW50czogew0KICAgICAgbWRiQnRuLA0KICAgICAgbWRiTW9kYWwsDQogICAgICAgbWRiTW9kYWxIZWFkZXIsIA0KICAgICAgIG1kYk1vZGFsVGl0bGUsIA0KICAgICAgIG1kYk1vZGFsQm9keSwgDQogICAgICAgbWRiTW9kYWxGb290ZXIsIA0KICAgICAgIG1kYkNvbnRhaW5lciANCiAgICB9LA0KICAgIG5hbWU6ICdlZGl0TWVtYmVyRGV0YWlsJywNCiAgICBtZXRob2RzOnsNCiAgICAgICAgaW1wb3J0TWVtYmVyRGF0YShzbmFwKSB7DQoNCiAgICAgICAgICAgIGNvbnN0IG1lbWJlckRhdGEgPSBzbmFwLnZhbCgpDQogICAgICAgICAgICBpZighbWVtYmVyRGF0YSl7DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6Jy9ub3RfZm91bmQnfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB0aGlzLm5hbWU9bWVtYmVyRGF0YS5uYW1lOw0KICAgICAgICAgICAgdGhpcy5zdGF0dXM9bWVtYmVyRGF0YS5zdGF0dXM7DQogICAgICAgICAgICB0aGlzLmVtYWlsPW1lbWJlckRhdGEuZW1haWw7DQogICAgICAgICAgICB0aGlzLmFjaGlldmVtZW50PW1lbWJlckRhdGEuYWNoaWV2ZW1lbnQ7DQogICAgICAgICAgICB0aGlzLnJlbWFya3M9bWVtYmVyRGF0YS5yZW1hcmtzOw0KICAgICAgICAgICAgdGhpcy51cGxvYWRlZEltYWdlPW1lbWJlckRhdGEuZmlsZVBhdGg7DQoNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICB1cGRhdGVNZW1iZXJEYXRhKCl7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5pbnB1dEltZzsNCiAgICAgICAgICAgIGNvbnN0IG1lbWJlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgICAgICAgICBjb25zdCBncmFkZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ncmFkZQ0KICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0oKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy4kcm91dGUucGFyYW1zLmdyYWRlPT09J3RlYWNoZXInKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMNCiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICBjb25zdCBtYWlsUmVnID0gL15bQS1aYS16MC05XXsxfVtBLVphLXowLTlfLi1dKkB7MX1bQS1aYS16MC05Xy4tXXsxLH1cLltBLVphLXowLTldezEsfSQvOw0KICAgICAgICAgICAgICAgIGlmKHRoaXMubmFtZS5sZW5ndGg8MjAgJiYgdGhpcy5uYW1lLmxlbmd0aD4wICYmIG1haWxSZWcudGVzdCh0aGlzLmVtYWlsKSl7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYoZmlsZXMubGVuZ3RoID09PSAwICYmICF0aGlzLnVwbG9hZGVkSW1hZ2Upew0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG49IumAgeS/oeS4reKApiI7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG5QdXNoPXRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgbWVtYmVycy8ke2dyYWRlfS8ke21lbWJlcklkfWApLnNldCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTp0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOnN0YXR1cygpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOnRoaXMuZW1haWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNoaWV2ZW1lbnQ6dGhpcy5hY2hpZXZlbWVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcmtzOnRoaXMucmVtYXJrcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDpudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZWRpdG1lbWJlcicpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihmaWxlcy5sZW5ndGggPT09IDApew0KICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TWVtYmVyRGV0YWlsQnRuPSLpgIHkv6HkuK3igKYiOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0TWVtYmVyRGV0YWlsQnRuUHVzaD10cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoYG1lbWJlcnMvJHtncmFkZX0vJHttZW1iZXJJZH1gKS5zZXQoew0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTp0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6c3RhdHVzKCksDQogICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDp0aGlzLmVtYWlsLA0KICAgICAgICAgICAgICAgICAgICAgICAgYWNoaWV2ZW1lbnQ6dGhpcy5hY2hpZXZlbWVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFya3M6dGhpcy5yZW1hcmtzLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGg6dGhpcy51cGxvYWRlZEltYWdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1lbWJlckRldGFpbEJ0bj0i6YCB5L+hIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG5QdXNoPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZWRpdG1lbWJlcicpDQogICAgICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZmlsZXNbMF0udHlwZSAhPSAnaW1hZ2UvanBlZycgJiYgZmlsZXNbMF0udHlwZSAhPSAnaW1hZ2UvZ2lmJyAmJiBmaWxlc1swXS50eXBlICE9ICdpbWFnZS9wbmcnICYmIGZpbGVzWzBdLnR5cGUgIT0gJ2FwcGxpY2F0aW9uL3BkZicpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWxNZXNzYWdlPSLnlLvlg4/jgpLmt7vku5jjgZfjgabjgY/jgaDjgZXjgYTjgIIiDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1Nb2RhbD10cnVlOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihmaWxlc1swXS5zaXplID4gMzAwMDAwMCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1Nb2RhbE1lc3NhZ2U9IueUu+WDj+ODleOCoeOCpOODq+ODleOCoeOCpOODq+OBjOWkp+OBjeOBmeOBjuOBvuOBmeOAglxuM01C5pyq5rqA44Gn44GK6aGY44GE44GX44G+44GZ44CCIg0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWw9dHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG49IumAgeS/oeS4reKApiI7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG5QdXNoPXRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZihgbWVtYmVyLyR7ZmlsZS5uYW1lfWApLnB1dChmaWxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoc25hcHNob3QpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoc25hcHNob3QubWV0YWRhdGEuZnVsbFBhdGgpLmdldERvd25sb2FkVVJMKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCh1cmwpPT57DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVQYXRoID0gdXJsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgbWVtYmVycy8ke2dyYWRlfS8ke21lbWJlcklkfWApLnNldCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTp0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOnN0YXR1cygpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOnRoaXMuZW1haWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNoaWV2ZW1lbnQ6dGhpcy5hY2hpZXZlbWVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcmtzOnRoaXMucmVtYXJrcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDp0aGlzLmZpbGVQYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKT0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1lbWJlckRldGFpbEJ0bj0i6YCB5L+hIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRNZW1iZXJEZXRhaWxCdG5QdXNoPWZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZWRpdG1lbWJlcicpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybU1vZGFsTWVzc2FnZT0i5rCP5ZCN44Go44Oh44O844Or44Ki44OJ44Os44K544Gv5b+F6aCI6aCF55uu44Gn44GZ44CCXG7mraPjgZfjgYTlvaLlvI/jgaflhaXlipvjgZfjgabjgY/jgaDjgZXjgYTjgIIiDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWw9dHJ1ZTsNCg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIC8vIOODoeODs+ODkOODvOe3qOmbhuOBq+aIu+OCi+mWouaVsA0KICAgICAgICBiYWNrTWVtYmVyKCl7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2VkaXRtZW1iZXInKQ0KICAgICAgICB9LA0KICAgICAgICAvLyDmt7vku5jnlLvlg4/jgpLliYrpmaTjgZfjgZ/jgajjgY3jga7lh6bnkIYNCiAgICAgICAgcmVtb3ZlVXBsb2FkZWRJbWcoKXsNCiAgICAgICAgICAgIHRoaXMudXBsb2FkZWRJbWFnZT0iIjsNCiAgICAgICAgICAgIHRoaXMuaW5wdXRJbWc9IiI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVtYmVyLWRldGFpbC1pbnB1dGZpbGUiKS52YWx1ZSA9ICcnOw0KDQogICAgICAgIH0sDQogICAgICAgIC8vIOeUu+WDj+a3u+S7mOOBl+OBn+OBqOOBjeOBq+eZuueBq+OBmeOCi+mWouaVsA0KICAgICAgICBvbkZpbGVDaGFuZ2UoZSkgew0KICAgICAgICAgICANCiAgICAgICAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOw0KICAgICAgICAgICAgdGhpcy5pbnB1dEltZyA9IGZpbGVzDQogICAgICAgICAgICB0aGlzLmNyZWF0ZUltYWdlKGZpbGVzWzBdKTsNCiAgICAgICAgfSwNCiAgICAgICAgICAgIC8vIOOCouODg+ODl+ODreODvOODieOBl+OBn+eUu+WDj+OCkuihqOekug0KICAgICAgICBjcmVhdGVJbWFnZShmaWxlKSB7DQogICAgIA0KICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsNCiAgICAgICAgICAgIHRoaXMudXBsb2FkZWRJbWFnZSA9IGUudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpew0KICAgICAgICBjb25zdCBtZW1iZXJJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZA0KICAgICAgICBjb25zdCBncmFkZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ncmFkZQ0KICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihgbWVtYmVycy8ke2dyYWRlfS8ke21lbWJlcklkfWApLm9uKCd2YWx1ZScsIHRoaXMuaW1wb3J0TWVtYmVyRGF0YSkNCg0KDQogICAgfQ0KICB9DQo="},{"version":3,"sources":["EditMemberDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"EditMemberDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n    <mdb-container >\r\n        <h2 class=\"mb-5\">Member Settings<span>メンバーの編集</span></h2>\r\n\r\n        <!-- <input type=\"file\" @change=\"onFileChange\"><br>\r\n        <img :src=\"uploadedImage\" style=\"width:100%;\" /> -->\r\n\r\n        <div class=\"input-group mb-2\">\r\n            <div class=\"custom-file\">\r\n            <input type=\"file\" @change=\"onFileChange\" class=\"custom-file-input\" id=\"member-detail-inputfile\" aria-describedby=\"inputGroupFileAddon01\">\r\n            <label class=\"custom-file-label\" for=\"inputGroupFile01\">ファイル選択</label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"position-relative\" v-if=\"uploadedImage\">\r\n            <img :src=\"uploadedImage\" style=\"width:100%;\"  />\r\n            <mdb-btn  class=\"z-depth-2 position-absolute remove-carousel\" @click=\"removeUploadedImg()\" color=\"danger\">削除</mdb-btn>\r\n        </div>\r\n\r\n         <!-- 選択が教職員だった場合に表示する役職欄 -->\r\n            <div class=\"form-group\">\r\n                <div v-if=\"this.$route.params.grade==='teacher'\">\r\n                    <label for=\"status-form\">役職</label>\r\n                    <input type=\"text\" id=\"status-form\" class=\"form-control\" v-model=\"status\">\r\n                </div>\r\n            </div>\r\n            <!-- 名前 -->\r\n            <div class=\"form-group\">\r\n                <label for=\"name-form\">名前<span class=\"ml-1 red-text\">※必須</span></label>\r\n                <input type=\"text\" id=\"name-form\" class=\"form-control\" v-model=\"name\">\r\n            </div>\r\n            <!-- メールアドレス -->\r\n            <div class=\"form-group\">\r\n                <label for=\"email-form\">E-Mail<span class=\"ml-1 red-text\">※必須</span></label>\r\n                <input type=\"email\" id=\"email-form\" class=\"form-control\" v-model=\"email\">\r\n            </div>\r\n            <!-- 研究内容 -->\r\n            <div class=\"form-group\">\r\n                <label for=\"achievement-form\">研究内容・実績等</label>\r\n                <textarea rows=\"3\" type=\"text\" id=\"achievement-form\" class=\"form-control\" v-model=\"achievement\"></textarea>\r\n            </div>\r\n            <!-- 自己紹介 -->\r\n            <div class=\"form-group\">\r\n                <label for=\"remark-form\">自己紹介</label>\r\n                <textarea rows=\"3\" type=\"text\" id=\"remark-form\" class=\"form-control\" v-model=\"remarks\"></textarea>\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n        <div class=\"d-flex flex-row-reverse\">\r\n           \r\n            <mdb-btn class=\"z-depth-0\" :disabled=\"editMemberDetailBtnPush\"  @click=\"updateMemberData()\" color=\"success\">{{ editMemberDetailBtn }}</mdb-btn>\r\n             <mdb-btn class=\"z-depth-0\" @click=\"backMember()\" color=\"secondary\">戻る</mdb-btn>\r\n        </div>\r\n        </mdb-container >\r\n\r\n        <!-- お知らせモーダル -->\r\n        <div>\r\n            <mdb-modal :show=\"formModal\" @close=\"formModal = false\">\r\n            <mdb-modal-header>\r\n                <mdb-modal-title>メッセージ</mdb-modal-title>\r\n            </mdb-modal-header>\r\n            <mdb-modal-body style=\"white-space:pre-wrap; word-wrap:break-word;\">{{formModalMessage}}</mdb-modal-body>\r\n            <mdb-modal-footer>\r\n                <mdb-btn class=\"z-depth-0\" color=\"success\" @click.native=\"formModal = false\">OK</mdb-btn>\r\n            </mdb-modal-footer>\r\n            </mdb-modal>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase';\r\nimport { mdbBtn, mdbModal, mdbModalHeader, mdbModalTitle, mdbModalBody, mdbModalFooter,mdbContainer } from 'mdbvue';\r\n  export default{\r\n    data(){\r\n        return{\r\n            name:'',\r\n            status:'',\r\n            email:'',\r\n            achievement:'',\r\n            remarks:'',\r\n            uploadedImage:'',\r\n            inputImg:\"\",\r\n            filePath:\"\",\r\n            editMemberDetailBtn:\"適用\",\r\n            editMemberDetailBtnPush:false,\r\n            formModal:false,\r\n            formModalMessage:\"\",\r\n\r\n        }\r\n    },\r\n    components: {\r\n      mdbBtn,\r\n      mdbModal,\r\n       mdbModalHeader, \r\n       mdbModalTitle, \r\n       mdbModalBody, \r\n       mdbModalFooter, \r\n       mdbContainer \r\n    },\r\n    name: 'editMemberDetail',\r\n    methods:{\r\n        importMemberData(snap) {\r\n\r\n            const memberData = snap.val()\r\n            if(!memberData){\r\n                this.$router.push({path:'/not_found'})\r\n            }\r\n        \r\n            this.name=memberData.name;\r\n            this.status=memberData.status;\r\n            this.email=memberData.email;\r\n            this.achievement=memberData.achievement;\r\n            this.remarks=memberData.remarks;\r\n            this.uploadedImage=memberData.filePath;\r\n\r\n            \r\n        },\r\n        updateMemberData(){\r\n            \r\n            const files = this.inputImg;\r\n            const memberId = this.$route.params.id\r\n            const grade = this.$route.params.grade\r\n            const status =()=>{\r\n                        if(this.$route.params.grade==='teacher'){\r\n                            return this.status\r\n                        }else{\r\n                            return null\r\n                        }\r\n                    };\r\n            const mailReg = /^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\\.[A-Za-z0-9]{1,}$/;\r\n                if(this.name.length<20 && this.name.length>0 && mailReg.test(this.email)){\r\n\r\n                    if(files.length === 0 && !this.uploadedImage){\r\n                     \r\n                        this.editMemberDetailBtn=\"送信中…\";\r\n                        this.editMemberDetailBtnPush=true;\r\n                        firebase.database().ref(`members/${grade}/${memberId}`).set({\r\n                            name:this.name,\r\n                            status:status(),\r\n                            email:this.email,\r\n                            achievement:this.achievement,\r\n                            remarks:this.remarks,\r\n                            filePath:null,\r\n                        }).then(()=>{\r\n                            this.$router.push('/editmember')\r\n                        })\r\n                    }else if(files.length === 0){\r\n                      \r\n                        this.editMemberDetailBtn=\"送信中…\";\r\n                        this.editMemberDetailBtnPush=true;\r\n                        firebase.database().ref(`members/${grade}/${memberId}`).set({\r\n                        name:this.name,\r\n                        status:status(),\r\n                        email:this.email,\r\n                        achievement:this.achievement,\r\n                        remarks:this.remarks,\r\n                        filePath:this.uploadedImage,\r\n                        }).then(()=>{\r\n                            this.editMemberDetailBtn=\"送信\";\r\n                            this.editMemberDetailBtnPush=false;\r\n                            this.$router.push('/editmember')\r\n                    })\r\n\r\n                    }else if(files[0].type != 'image/jpeg' && files[0].type != 'image/gif' && files[0].type != 'image/png' && files[0].type != 'application/pdf'){\r\n                        this.formModalMessage=\"画像を添付してください。\"\r\n                        this.formModal=true;\r\n                    }else if(files[0].size > 3000000){\r\n                        this.formModalMessage=\"画像ファイルファイルが大きすぎます。\\n3MB未満でお願いします。\"\r\n                        this.formModal=true;\r\n\r\n                    }\r\n                    else{\r\n                        this.editMemberDetailBtn=\"送信中…\";\r\n                        this.editMemberDetailBtnPush=true;\r\n                        const file = files[0]\r\n\r\n                        firebase.storage().ref(`member/${file.name}`).put(file)\r\n                                .then((snapshot)=>{\r\n                                 \r\n                                    firebase.storage().ref(snapshot.metadata.fullPath).getDownloadURL()\r\n                                    .then((url)=>{\r\n                                    this.filePath = url\r\n                                  \r\n                                    firebase.database().ref(`members/${grade}/${memberId}`).set({\r\n                                        name:this.name,\r\n                                        status:status(),\r\n                                        email:this.email,\r\n                                        achievement:this.achievement,\r\n                                        remarks:this.remarks,\r\n                                        filePath:this.filePath,\r\n                        }).then(()=>{\r\n                            this.editMemberDetailBtn=\"送信\";\r\n                            this.editMemberDetailBtnPush=false;\r\n                            this.$router.push('/editmember')\r\n                        })\r\n                        })\r\n                    })\r\n                }\r\n\r\n            }else{\r\n                this.formModalMessage=\"氏名とメールアドレスは必須項目です。\\n正しい形式で入力してください。\"\r\n                this.formModal=true;\r\n\r\n            }\r\n            \r\n        },\r\n        // メンバー編集に戻る関数\r\n        backMember(){\r\n            this.$router.push('/editmember')\r\n        },\r\n        // 添付画像を削除したときの処理\r\n        removeUploadedImg(){\r\n            this.uploadedImage=\"\";\r\n            this.inputImg=\"\";\r\n            document.getElementById(\"member-detail-inputfile\").value = '';\r\n\r\n        },\r\n        // 画像添付したときに発火する関数\r\n        onFileChange(e) {\r\n           \r\n            let files = e.target.files || e.dataTransfer.files;\r\n            this.inputImg = files\r\n            this.createImage(files[0]);\r\n        },\r\n            // アップロードした画像を表示\r\n        createImage(file) {\r\n     \r\n            let reader = new FileReader();\r\n            reader.onload = (e) => {\r\n            this.uploadedImage = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    },\r\n    created(){\r\n        const memberId = this.$route.params.id\r\n        const grade = this.$route.params.grade\r\n        firebase.database().ref(`members/${grade}/${memberId}`).on('value', this.importMemberData)\r\n\r\n\r\n    }\r\n  }\r\n</script>"]}]}