{"remainingRequest":"/usr/src/app/meneki-web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/meneki-web2/src/views/EditStudyDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/meneki-web2/src/views/EditStudyDetail.vue","mtime":1620829594581},{"path":"/usr/src/app/meneki-web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/meneki-web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7CmltcG9ydCB7VnVlRWRpdG9yfSBmcm9tICJ2dWUyLWVkaXRvciI7CmltcG9ydCB7IG1kYkJ0biwgbWRiTW9kYWwsIG1kYk1vZGFsSGVhZGVyLCBtZGJNb2RhbFRpdGxlLCBtZGJNb2RhbEJvZHksIG1kYk1vZGFsRm9vdGVyLCBtZGJDb250YWluZXIgfSBmcm9tICdtZGJ2dWUnOwpleHBvcnQgZGVmYXVsdHsKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGZpbGU6IiIsCiAgICAgICAgICAgIHRpdGxlOiIiLAogICAgICAgICAgICBDb250ZW50OiIiLAogICAgICAgICAgICBmaWxlUGF0aDoiIiwKICAgICAgICAgICAgdXBsb2FkZWRJbWFnZToiIiwKICAgICAgICAgICAgaW5wdXRJbWc6IiIsCiAgICAgICAgICAgIGZvcm1Nb2RhbDpmYWxzZSwKICAgICAgICAgICAgZm9ybU1vZGFsTWVzc2FnZToiIiwKICAgICAgICAgICAgc3R1ZHlEZXRhaWxCdG46IumAgeS/oSIsCiAgICAgICAgICAgIHN0dWR5RGV0YWlsQnRuUHVzaDpmYWxzZSwKCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBWdWVFZGl0b3IsCiAgICAgICAgbWRiQnRuLCBtZGJNb2RhbCwgbWRiTW9kYWxIZWFkZXIsIG1kYk1vZGFsVGl0bGUsIG1kYk1vZGFsQm9keSwgbWRiTW9kYWxGb290ZXIsIG1kYkNvbnRhaW5lcgogICAgfSwKICAgIHByb3BzOnsKICAgICAgICBzdHVkeUNvbnRlbnRzOk9iamVjdCwKICAgIH0sCiAgICBuYW1lOiAnZWRpdFN0dWR5RGV0YWlsJywKICAgIG1ldGhvZHM6ewogICAgICAgIGJhY2tTdHVkeSgpewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2VkaXRzdHVkeScpCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVTdHVkeSgpewogICAgICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuaW5wdXRJbWc7CiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMuJHJvdXRlLnBhcmFtc1snaWQnXQogICAgICAgICAgICBpZih0aGlzLnRpdGxlLmxlbmd0aD4wKXsKCiAgICAgICAgICAgICAgICBpZihmaWxlcy5sZW5ndGggPT09IDAgJiYgIXRoaXMudXBsb2FkZWRJbWFnZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkeURldGFpbEJ0bj0i6YCB5L+h5Lit4oCmIgogICAgICAgICAgICAgICAgICAgIHRoaXMuc3R1ZHlEZXRhaWxCdG5QdXNoPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoYHN0dWR5LyR7a2V5fWApLnNldCh7CiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGg6bnVsbCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTp0aGlzLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6dGhpcy5Db250ZW50LAogICAgICAgICAgICAgICAgfSkudGhlbigoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0dWR5RGV0YWlsQnRuPSLpgIHkv6EiCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R1ZHlEZXRhaWxCdG5QdXNoPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2VkaXRzdHVkeScpCiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDApewogICAgICAgICAgICAgICAgICAgIHRoaXMuc3R1ZHlEZXRhaWxCdG49IumAgeS/oeS4reKApiIKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0dWR5RGV0YWlsQnRuUHVzaD10cnVlOwogICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKGBzdHVkeS8ke2tleX1gKS5zZXQoewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDp0aGlzLnVwbG9hZGVkSW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOnRoaXMudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6dGhpcy5Db250ZW50LAogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkeURldGFpbEJ0bj0i6YCB5L+hIgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0dWR5RGV0YWlsQnRuUHVzaD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lZGl0c3R1ZHknKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9ZWxzZSBpZihmaWxlc1swXS50eXBlICE9ICdpbWFnZS9qcGVnJyAmJiBmaWxlc1swXS50eXBlICE9ICdpbWFnZS9naWYnICYmIGZpbGVzWzBdLnR5cGUgIT0gJ2ltYWdlL3BuZycgJiYgZmlsZXNbMF0udHlwZSAhPSAnYXBwbGljYXRpb24vcGRmJyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWxNZXNzYWdlPSLnlLvlg4/jgpLmt7vku5jjgZfjgabjgY/jgaDjgZXjgYTjgIIiCiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWw9dHJ1ZTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKGZpbGVzWzBdLnNpemUgPiAzMDAwMDAwKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1Nb2RhbE1lc3NhZ2U9IueUu+WDj+ODleOCoeOCpOODq+ODleOCoeOCpOODq+OBjOWkp+OBjeOBmeOBjuOBvuOBmeOAglxuM01C5pyq5rqA44Gn44GK6aGY44GE44GX44G+44GZ44CCIgogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybU1vZGFsPXRydWU7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0dWR5RGV0YWlsQnRuPSLpgIHkv6HkuK3igKYiCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkeURldGFpbEJ0blB1c2g9dHJ1ZTsKICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF0KICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKGBzdHVkeS8ke2ZpbGUubmFtZX1gKS5wdXQoZmlsZSkKICAgICAgICAgICAgICAgICAgICAudGhlbigoc25hcHNob3QpPT57CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKHNuYXBzaG90Lm1ldGFkYXRhLmZ1bGxQYXRoKS5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCh1cmwpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSB1cmwKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKGBzdHVkeS8ke2tleX1gKS5zZXQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGg6dGhpcy5maWxlUGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOnRoaXMudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OnRoaXMuQ29udGVudH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0dWR5RGV0YWlsQnRuPSLpgIHkv6EiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkeURldGFpbEJ0blB1c2g9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lZGl0c3R1ZHknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1Nb2RhbE1lc3NhZ2U9IuOCv+OCpOODiOODq+OBr+W/hemgiOmgheebruOBp+OBmeOAglxu5q2j44GX44GE5b2i5byP44Gn5YWl5Yqb44GX44Gm44GP44Gg44GV44GE44CCIgogICAgICAgICAgICAgICAgdGhpcy5mb3JtTW9kYWw9dHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgCgogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIG9uRmlsZUNoYW5nZShlKSB7CiAgICAgICAgCiAgICAgICAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICAgICAgICB0aGlzLmlucHV0SW1nID0gZmlsZXMKICAgICAgICAgICAgdGhpcy5jcmVhdGVJbWFnZShmaWxlc1swXSk7CiAgICAgICAgfSwKICAgICAgICAvLyDmt7vku5jjgZfjgZ/nlLvlg4/jgpLliYrpmaQKICAgICAgICByZW1vdmVVcGxvYWRlZEltZygpewogICAgICAgICAgICB0aGlzLnVwbG9hZGVkSW1hZ2U9IiI7CiAgICAgICAgICAgIHRoaXMuaW5wdXRJbWc9IiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdHVkeS1kZXRhaWwtaW5wdXRmaWxlIikudmFsdWUgPSAnJzsKICAgICAgICB9LAogICAgICAgIC8vIOOCouODg+ODl+ODreODvOODieOBl+OBn+eUu+WDj+OCkuihqOekugogICAgICAgIGNyZWF0ZUltYWdlKGZpbGUpIHsKICAgICAgICAKICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgICAgICB0aGlzLnVwbG9hZGVkSW1hZ2UgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgfTsKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFuZGxlSW1hZ2VBZGRlZDogZnVuY3Rpb24oZmlsZSwgRWRpdG9yLCBjdXJzb3JMb2NhdGlvbiwgcmVzZXRVcGxvYWRlcikgewogICAgLy8gQW4gZXhhbXBsZSBvZiB1c2luZyBGb3JtRGF0YQogICAgLy8gTk9URTogWW91ciBrZXkgY291bGQgYmUgZGlmZmVyZW50IHN1Y2ggYXM6CiAgICAvLyBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKQoKCiAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgiaW1hZ2UiLCBmaWxlKTsKCiAgICBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKGZpbGUubmFtZSkucHV0KGZpbGUpCiAgICAudGhlbigoc25hcHNob3QpPT57IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKIAogICAgICAgIGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoZmlsZS5uYW1lKS5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgLnRoZW4oKHVybCk9PnsKICAgICAgICAgICAgRWRpdG9yLmluc2VydEVtYmVkKGN1cnNvckxvY2F0aW9uLCAnaW1hZ2UnLCB1cmwpCiAgICAgICAgICAgIHJlc2V0VXBsb2FkZXIoKQogICAgICAgIH0pCiAgICB9KQogICAgLmNhdGNoKChlcnIpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDonL2Vycm9yJ30pCiAgICB9KQp9CiAgICB9LAogIHdhdGNoOnsKICAgIHN0dWR5Q29udGVudHM6ZnVuY3Rpb24gKCkgewoKICAgICAgdGhpcy5Db250ZW50ID0gdGhpcy5zdHVkeUNvbnRlbnQKICAgICAgdGhpcy50aXRsZT10aGlzLnN0dWR5Q29udGVudHNbdGhpcy4kcm91dGUucGFyYW1zWydpZCddXS50aXRsZQogICAgICB0aGlzLkNvbnRlbnQ9dGhpcy5zdHVkeUNvbnRlbnRzW3RoaXMuJHJvdXRlLnBhcmFtc1snaWQnXV0uY29udGVudAogICAgICB0aGlzLnVwbG9hZGVkSW1hZ2U9dGhpcy5zdHVkeUNvbnRlbnRzW3RoaXMuJHJvdXRlLnBhcmFtc1snaWQnXV0uZmlsZVBhdGgKICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgCgogICAgICAgIHRoaXMudGl0bGU9dGhpcy5zdHVkeUNvbnRlbnRzW3RoaXMuJHJvdXRlLnBhcmFtc1snaWQnXV0udGl0bGUKICAgICAgICB0aGlzLkNvbnRlbnQ9dGhpcy5zdHVkeUNvbnRlbnRzW3RoaXMuJHJvdXRlLnBhcmFtc1snaWQnXV0uY29udGVudAogICAgICAgIHRoaXMudXBsb2FkZWRJbWFnZT10aGlzLnN0dWR5Q29udGVudHNbdGhpcy4kcm91dGUucGFyYW1zWydpZCddXS5maWxlUGF0aAogICAgICAgIGlmKCF0aGlzLnN0dWR5Q29udGVudHNbdGhpcy4kcm91dGUucGFyYW1zWydpZCddXSl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvbm90X2ZvdW5kJ30pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["EditStudyDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;AAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditStudyDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <mdb-container>\r\n        <h2>Study Settings<span>研究内容の編集</span></h2>\r\n        <div class=\"mb-3 mt-5\">\r\n            <h3 class=\"mt-5\">研究内容の詳細画面</h3>\r\n        </div>\r\n        <!-- タイトル -->\r\n        <div class=\"form-group\">\r\n            <label for=\"study-title-form\">タイトル</label>\r\n            <input type=\"text\" id=\"study-title-form\" class=\"form-control\" v-model=\"title\">\r\n        </div>\r\n\r\n\r\n        <div class=\"input-group mb-2\">\r\n            <div class=\"custom-file\">\r\n            <input @change=\"onFileChange\" type=\"file\" class=\"custom-file-input\" id=\"study-detail-inputfile\" aria-describedby=\"inputGroupFileAddon01\">\r\n            <label class=\"custom-file-label\" for=\"inputGroupFile01\">ファイル選択</label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mb-3 position-relative\" v-if=\"uploadedImage\">\r\n            <img :src=\"uploadedImage\" style=\"width:100%;\"  />\r\n            <mdb-btn  class=\"z-depth-2 position-absolute remove-carousel\" @click=\"removeUploadedImg()\" color=\"danger\">削除</mdb-btn>\r\n        </div>\r\n        <vue-editor v-model=\"Content\" id=\"editor\" useCustomImageHandler @image-added=\"handleImageAdded\"> </vue-editor>\r\n        <div class=\"d-flex flex-row-reverse\">\r\n            <mdb-btn class=\"z-depth-0\" :disabled=\"studyDetailBtnPush\" color=\"success\" @click=\"updateStudy()\">{{ studyDetailBtn }}</mdb-btn>\r\n            <mdb-btn class=\"z-depth-0\"  color=\"secondary\" @click=\"backStudy\">戻る</mdb-btn>\r\n        </div>\r\n        </mdb-container>\r\n\r\n        <!-- お知らせモーダル -->\r\n        <div>\r\n            <mdb-modal :show=\"formModal\" @close=\"formModal = false\">\r\n            <mdb-modal-header>\r\n                <mdb-modal-title>メッセージ</mdb-modal-title>\r\n            </mdb-modal-header>\r\n            <mdb-modal-body style=\"white-space:pre-wrap; word-wrap:break-word;\">{{formModalMessage}}</mdb-modal-body>\r\n            <mdb-modal-footer>\r\n                <mdb-btn class=\"z-depth-0\" color=\"success\" @click.native=\"formModal = false\">OK</mdb-btn>\r\n            </mdb-modal-footer>\r\n            </mdb-modal>\r\n        </div>\r\n        \r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import firebase from 'firebase';\r\n    import {VueEditor} from \"vue2-editor\";\r\n    import { mdbBtn, mdbModal, mdbModalHeader, mdbModalTitle, mdbModalBody, mdbModalFooter, mdbContainer } from 'mdbvue';\r\n    export default{\r\n        data(){\r\n            return{\r\n                file:\"\",\r\n                title:\"\",\r\n                Content:\"\",\r\n                filePath:\"\",\r\n                uploadedImage:\"\",\r\n                inputImg:\"\",\r\n                formModal:false,\r\n                formModalMessage:\"\",\r\n                studyDetailBtn:\"送信\",\r\n                studyDetailBtnPush:false,\r\n\r\n            }\r\n        },\r\n        components: {\r\n            VueEditor,\r\n            mdbBtn, mdbModal, mdbModalHeader, mdbModalTitle, mdbModalBody, mdbModalFooter, mdbContainer\r\n        },\r\n        props:{\r\n            studyContents:Object,\r\n        },\r\n        name: 'editStudyDetail',\r\n        methods:{\r\n            backStudy(){\r\n                this.$router.push('/editstudy')\r\n            },\r\n            updateStudy(){\r\n                const files = this.inputImg;\r\n                const key = this.$route.params['id']\r\n                if(this.title.length>0){\r\n\r\n                    if(files.length === 0 && !this.uploadedImage){\r\n                        this.studyDetailBtn=\"送信中…\"\r\n                        this.studyDetailBtnPush=true;\r\n                        firebase.database().ref(`study/${key}`).set({\r\n                        filePath:null,\r\n                        title:this.title,\r\n                        content:this.Content,\r\n                    }).then(()=>{\r\n                            this.studyDetailBtn=\"送信\"\r\n                            this.studyDetailBtnPush=false;\r\n                            this.$router.push('/editstudy')\r\n                        })\r\n\r\n                    }\r\n                    else if (files.length === 0){\r\n                        this.studyDetailBtn=\"送信中…\"\r\n                        this.studyDetailBtnPush=true;\r\n                        firebase.database().ref(`study/${key}`).set({\r\n                            filePath:this.uploadedImage,\r\n                            title:this.title,\r\n                            content:this.Content,\r\n                        }).then(()=>{\r\n                            this.studyDetailBtn=\"送信\"\r\n                            this.studyDetailBtnPush=false;\r\n                            this.$router.push('/editstudy')\r\n                        })\r\n                    }else if(files[0].type != 'image/jpeg' && files[0].type != 'image/gif' && files[0].type != 'image/png' && files[0].type != 'application/pdf'){\r\n                        this.formModalMessage=\"画像を添付してください。\"\r\n                        this.formModal=true;\r\n                    }else if(files[0].size > 3000000){\r\n                        this.formModalMessage=\"画像ファイルファイルが大きすぎます。\\n3MB未満でお願いします。\"\r\n                        this.formModal=true;\r\n\r\n                    }\r\n                    else{\r\n                        this.studyDetailBtn=\"送信中…\"\r\n                        this.studyDetailBtnPush=true;\r\n                     \r\n                        const file = files[0]\r\n                        firebase.storage().ref(`study/${file.name}`).put(file)\r\n                        .then((snapshot)=>{\r\n                      \r\n                            firebase.storage().ref(snapshot.metadata.fullPath).getDownloadURL()\r\n                            .then((url)=>{\r\n                            this.filePath = url\r\n                      \r\n                            firebase.database().ref(`study/${key}`).set({\r\n                                filePath:this.filePath,\r\n                                title:this.title,\r\n                                content:this.Content}).then(()=>{\r\n                                    this.studyDetailBtn=\"送信\"\r\n                                    this.studyDetailBtnPush=false;\r\n                                    this.$router.push('/editstudy')\r\n                                })\r\n                            })\r\n                        })\r\n                    }\r\n\r\n                }else{\r\n                    this.formModalMessage=\"タイトルは必須項目です。\\n正しい形式で入力してください。\"\r\n                    this.formModal=true;\r\n                }\r\n                \r\n                \r\n\r\n                \r\n            },\r\n            onFileChange(e) {\r\n            \r\n                let files = e.target.files || e.dataTransfer.files;\r\n                this.inputImg = files\r\n                this.createImage(files[0]);\r\n            },\r\n            // 添付した画像を削除\r\n            removeUploadedImg(){\r\n                this.uploadedImage=\"\";\r\n                this.inputImg=\"\";\r\n                document.getElementById(\"study-detail-inputfile\").value = '';\r\n            },\r\n            // アップロードした画像を表示\r\n            createImage(file) {\r\n            \r\n                let reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                this.uploadedImage = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n            },\r\n                    handleImageAdded: function(file, Editor, cursorLocation, resetUploader) {\r\n        // An example of using FormData\r\n        // NOTE: Your key could be different such as:\r\n        // formData.append('file', file)\r\n\r\n\r\n        var formData = new FormData();\r\n        formData.append(\"image\", file);\r\n\r\n        firebase.storage().ref(file.name).put(file)\r\n        .then((snapshot)=>{ // eslint-disable-line\r\n     \r\n            firebase.storage().ref(file.name).getDownloadURL()\r\n            .then((url)=>{\r\n                Editor.insertEmbed(cursorLocation, 'image', url)\r\n                resetUploader()\r\n            })\r\n        })\r\n        .catch((err) => { // eslint-disable-line\r\n             this.$router.push({path:'/error'})\r\n        })\r\n    }\r\n        },\r\n      watch:{\r\n        studyContents:function () {\r\n    \r\n          this.Content = this.studyContent\r\n          this.title=this.studyContents[this.$route.params['id']].title\r\n          this.Content=this.studyContents[this.$route.params['id']].content\r\n          this.uploadedImage=this.studyContents[this.$route.params['id']].filePath\r\n        }\r\n        },\r\n        created(){\r\n      \r\n   \r\n            this.title=this.studyContents[this.$route.params['id']].title\r\n            this.Content=this.studyContents[this.$route.params['id']].content\r\n            this.uploadedImage=this.studyContents[this.$route.params['id']].filePath\r\n            if(!this.studyContents[this.$route.params['id']]){\r\n                this.$router.push({path:'/not_found'})\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n"]}]}